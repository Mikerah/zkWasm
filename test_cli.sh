#!/bin/bash

set -e
set -x

# rm -rf output

# Single test
RUST_LOG=info cargo run --release --features cuda -- -k 22 --function zkmain --output ./output --wasm wasm/fail.wasm setup

RUST_LOG=info cargo run --release --features cuda -- -k 22 --function zkmain --output ./output --wasm wasm/fail.wasm aggregate-prove --public 0x12:i64 --private 0x0917:i64 0xf9043a0183046276b9010000200000000000000000000080000000000000000000000000010000000000000000000000000001000000000000000002040000080000000000040000000000000000000000000000000008000000200000080000000000000000008000000004000000000000000000000000000000000000000000000000000010000000000000000000000000004000000000000000000001000000080000004000000000000000004000000000000000020100000000000000000000000000020000000000000002000000080000000000000000000000000000001020000000000020000000200000000080000000000000000000000000000000400000000000000000f9032ff87a94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f842a0e1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109ca00000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488da0000000000000000000000000000000000000000000000000016345785d8a0000f89b94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa00000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488da0000000000000000000000000c09fd65b483997d3a4b01e9e0f3c8560d0d91ff6a0000000000000000000000000000000000000000000000000016345785d8a0000f89b94d4cfb98837861216f1b51ca7368471c7a3d428abf863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000c09fd65b483997d3a4b01e9e0f3c8560d0d91ff6a0000000000000000000000000b4645d3702f52f0a610e1616c5c07b81a085bfffa0000000000000000000000000000000000000000000001e9bf47b130a5af20ff5f87994c09fd65b483997d3a4b01e9e0f3c8560d0d91ff6e1a01c411e9a96e071241c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1b840000000000000000000000000000000000000000000000000e714ae4d320c454300000000000000000000000000000000000000000013d969429a7b93a3578f60f8fc94c09fd65b483997d3a4b01e9e0f3c8560d0d91ff6f863a0d78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822a00000000000000000000000007a250d5630b4cf539739df2c5dacb4c659f2488da0000000000000000000000000b4645d3702f52f0a610e1616c5c07b81a085bfffb880000000000000000000000000000000000000000000000000016345785d8a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000001e9bf47b130a5af20ff5f904d701830a2d40b9010000200000000000000000000080000000000000000000000000000000000000000000000000400000000000000000000002000000080000000000000001000000000000040000000004000008000000200000000000000000000000008000010000000000000000000000020000000000000000000000000000000010000000800000000000000000000000000000000000000003000000080002004000000000000800000000000000000000000000000000000000000000000000000000000002000002000000000000000000000000400000000000001000000000000000000000200000000000000000010000000000000000000000400000000080100000f903ccf87a94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f842a0e1fffcc4923d04b559f4d29a8bfc6cda04eb5b0d3c460751c2402c5c5cc9109ca0000000000000000000000000ef1c6e67703c7bd7107eed8303fbe6ec2554bf6ba000000000000000000000000000000000000000000000000006f05b59d3b20000f89b94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000ef1c6e67703c7bd7107eed8303fbe6ec2554bf6ba0000000000000000000000000ef1c6e67703c7bd7107eed8303fbe6ec2554bf6ba000000000000000000000000000000000000000000000000006f05b59d3b20000f89b94c02aaa39b223fe8d0a0e5c4f27ead9083c756cc2f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa0000000000000000000000000ef1c6e67703c7bd7107eed8303fbe6ec2554bf6ba00000000000000000000000007b8b02947f02b022ecb8edfdd7d649cfab33c16da000000000000000000000000000000000000000000000000006f05b59d3b20000f89b948ca82016e5efc3b028c4bd7ed35c3d6585105360f863a0ddf252ad1be2c89b69c2b068fc378daa952ba7f163c4a11628f55a4df523b3efa00000000000000000000000007b8b02947f02b022ecb8edfdd7d649cfab33c16da00000000000000000000000008b27cd7b03f285b32186d1f6b114e4333e4fb181a00000000000000000000000000000000000000000035769e82e99dc62407451bcf879947b8b02947f02b022ecb8edfdd7d649cfab33c16de1a01c411e9a96e071241c2f21f7726b17ae89e3cab4c78be50e062b03a9fffbbad1b84000000000000000000000000000000000000000010a239fe4eb423de7b5cb2a4a0000000000000000000000000000000000000000000000022df26b5e1c7ac2caf8fc947b8b02947f02b022ecb8edfdd7d649cfab33c16df863a0d78ad95fa46c994b6551d0da85fc275fe613ce37657fb8d5e3d130840159d822a0000000000000000000000000ef1c6e67703c7bd7107eed8303fbe6ec2554bf6ba00000000000000000000000008b27cd7b03f285b32186d1f6b114e4333e4fb181b880000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006f05b59d3b200000000000000000000000000000000000000000000035769e82e99dc62407451bc0000000000000000000000000000000000000000000000000000000000000000:bytes-packed
RUST_LOG=info cargo run --release --features cuda -- -k 22 --function zkmain --output ./output --wasm wasm/fail.wasm aggregate-verify --proof output/aggregate-circuit.0.transcript.data  --instances output/aggregate-circuit.0.instance.data
exit 0

RUST_LOG=info cargo run --release --features cuda -- -k 22 --function zkmain --output ./output --wasm wasm/fail.wasm single-verify --proof output/zkwasm.0.transcript.data --instance output/zkwasm.0.instance.data
exit 0
RUST_LOG=info cargo run --release --features cuda -- -k 22 --function zkmain --output ./output --wasm wasm/fail.wasm aggregate-prove --public 133:i64 --public 2:i64
RUST_LOG=info cargo run --release --features cuda -- -k 22 --function zkmain --output ./output --wasm wasm/fail.wasm aggregate-verify --proof output/aggregate-circuit.0.transcript.data  --instances output/aggregate-circuit.0.instance.data
RUST_LOG=info cargo run --release --features cuda -- -k 22 --function zkmain --output ./output --wasm wasm/fail.wasm solidity-aggregate-verifier --proof output/aggregate-circuit.0.transcript.data  --instances output/aggregate-circuit.0.instance.data
